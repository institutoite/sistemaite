use App\Models\Persona;
use App\Models\Inscripcione;
use App\Models\Matriculacion;
use Carbon\Carbon;
use Illuminate\Support\Facades\Storage;
use Intervention\Image\Facades\Image;


 $prospectos = Prospecto::join('estados', 'estados.id', '=', 'prospectos.estado_id')
        ->select('prospectos.id', 'telefono', 'estados.estado',
            DB::raw('(SELECT MAX(updated_at) FROM observaciones 
                        WHERE observable_type = "App\Models\Prospecto" 
                        AND observable_id = prospectos.id) as ultima_observacion'))
        ->get();
use App\Models\Persona;
use App\Models\Inscripcione;
use App\Models\Matriculacion;
use App\Models\Prospecto;
use Carbon\Carbon;
use Illuminate\Support\Facades\Storage;
use Intervention\Image\Facades\Image;


 $prospectos = Prospecto::join('estados', 'estados.id', '=', 'prospectos.estado_id')
        ->select('prospectos.id', 'telefono', 'estados.estado',
            DB::raw('(SELECT MAX(updated_at) FROM observaciones 
                        WHERE observable_type = "App\Models\Prospecto" 
                        AND observable_id = prospectos.id) as ultima_observacion'))
        ->get();
use App\Models\Persona;
use App\Models\Inscripcione;
use App\Models\Matriculacion;
use App\Models\Prospecto;
use Carbon\Carbon;
use Illuminate\Support\Facades\Storage;
use Intervention\Image\Facades\Image;


 $prospectos = Prospecto::join('estados', 'estados.id', '=', 'prospectos.estado_id')
        ->select('prospectos.id', 'telefono', 'estados.estado',
            DB::raw('(SELECT MAX(updated_at) FROM observables 
                        WHERE observable_type = "App\Models\Prospecto" 
                        AND observable_id = prospectos.id) as ultima_observacion'))
        ->get();
use App\Models\Persona;
use App\Models\Inscripcione;
use App\Models\Matriculacion;
use App\Models\Prospecto;
use Carbon\Carbon;
use Illuminate\Support\Facades\Storage;
use Intervention\Image\Facades\Image;


 $prospectos = Prospecto::join('estados', 'estados.id', '=', 'prospectos.estado_id')
        ->select('prospectos.id', 'telefono', 'estados.estado',
            DB::raw('(SELECT MAX(updated_at) FROM observacions 
                        WHERE observable_type = "App\Models\Prospecto" 
                        AND observable_id = prospectos.id) as ultima_observacion'))
        ->get();
use App\Models\Persona;
use App\Models\Inscripcione;
use App\Models\Matriculacion;
use App\Models\Prospecto;
use Carbon\Carbon;
use Illuminate\Support\Facades\Storage;
use Intervention\Image\Facades\Image;


 $prospectos = Prospecto::join('estados', 'estados.id', '=', 'prospectos.estado_id')
        ->select('prospectos.id', 'telefono', 'estados.estado',
            DB::raw('(SELECT MAX(updated_at) FROM observacions 
                        WHERE observable_type = "App\\Models\\Prospecto" 
                        AND observable_id = prospectos.id) as ultima_observacion'))
        ->get();
use App\Models\Persona;
use App\Models\Inscripcione;
use App\Models\Matriculacion;
use App\Models\Prospecto;
use Carbon\Carbon;
use Illuminate\Support\Facades\Storage;
use Intervention\Image\Facades\Image;


 $prospectos = Prospecto::join('estados', 'estados.id', '=', 'prospectos.estado_id')
        ->select('prospectos.id', 'telefono', 'estados.estado',
            DB::raw('(SELECT MAX(updated_at) FROM observacions 
                        WHERE observable_type = "App\\Models\\Prospecto" 
                        AND observable_id = prospectos.id) as ultima_observacion'))
        ->get();
use App\Models\Persona;
use App\Models\Inscripcione;
use App\Models\Matriculacion;
use App\Models\Prospecto;
use Carbon\Carbon;
use Illuminate\Support\Facades\Storage;
use Intervention\Image\Facades\Image;


 $prospectos = Prospecto::join('estados', 'estados.id', '=', 'prospectos.estado_id')
        ->select('prospectos.id', 'telefono', 'estados.estado',
            DB::raw('(SELECT MAX(updated_at) FROM observacions 
                        WHERE observable_type = "App\\Models\\Prospecto" 
                        AND observable_id = prospectos.id) as ultima_observacion'))
        ->get();
use App\Models\Persona;
use App\Models\Inscripcione;
use App\Models\Matriculacion;
use App\Models\Prospecto;
use Carbon\Carbon;
use Illuminate\Support\Facades\Storage;
use Intervention\Image\Facades\Image;


 $prospectos = Prospecto::join('estados', 'estados.id', '=', 'prospectos.estado_id')
        ->select('prospectos.id', 'telefono', 'estados.estado',
            DB::raw('(SELECT MAX(updated_at) FROM observacions 
                        WHERE observable_type = "App\\Models\\Prospecto" 
                        AND observable_id = prospectos.id) as ultima_observacion'))
        ->get();
use App\Models\Persona;
use App\Models\Inscripcione;
use App\Models\Matriculacion;
use App\Models\Prospecto;
use Carbon\Carbon;
use Illuminate\Support\Facades\Storage;
use Intervention\Image\Facades\Image;


 $prospectos = Prospecto::join('estados', 'estados.id', '=', 'prospectos.estado_id')
        ->select('prospectos.id', 'telefono', 'estados.estado',
            DB::raw('(SELECT MAX(updated_at) FROM observacions 
                        WHERE observable_type = "App\\Models\\Prospecto" 
                        AND observable_id = prospectos.id) as ultima_observacion'))
        ->get();
use App\Models\Persona;
use App\Models\Inscripcione;
use App\Models\Matriculacion;
use App\Models\Prospecto;
use Carbon\Carbon;
use Illuminate\Support\Facades\Storage;
use Intervention\Image\Facades\Image;


 $prospectos = Prospecto::join('estados', 'estados.id', '=', 'prospectos.estado_id')
        ->select('prospectos.id', 'telefono', 'estados.estado',
            DB::raw('(SELECT MAX(updated_at) FROM observacions 
                        WHERE observable_type = "App\\Models\\Prospecto"
						and where observable_id=prospectos.id
                        AND observable_id = prospectos.id) as ultima_observacion'))
        ->get();
use App\Models\Persona;
use App\Models\Inscripcione;
use App\Models\Matriculacion;
use App\Models\Prospecto;
use Carbon\Carbon;
use Illuminate\Support\Facades\Storage;
use Intervention\Image\Facades\Image;


 $prospectos = Prospecto::join('estados', 'estados.id', '=', 'prospectos.estado_id')
        ->select('prospectos.id', 'telefono', 'estados.estado',
            DB::raw('(SELECT MAX(updated_at) FROM observacions 
                        WHERE observable_type = "App\\Models\\Prospecto"
						AND where observable_id=prospectos.id
                        AND observable_id = prospectos.id) as ultima_observacion'))
        ->get();
use App\Models\Persona;
use App\Models\Inscripcione;
use App\Models\Matriculacion;
use App\Models\Prospecto;
use Carbon\Carbon;
use Illuminate\Support\Facades\Storage;
use Intervention\Image\Facades\Image;


 $prospectos = Prospecto::join('estados', 'estados.id', '=', 'prospectos.estado_id')
        ->select('prospectos.id', 'telefono', 'estados.estado',
            DB::raw('(SELECT MAX(updated_at) FROM observacions 
                        WHERE observable_type = "App\\Models\\Prospecto"
						AND observable_id=prospectos.id
                        AND observable_id = prospectos.id) as ultima_observacion'))
        ->get();
use App\Models\Persona;
use App\Models\Inscripcione;
use App\Models\Matriculacion;
use App\Models\Prospecto;
use Carbon\Carbon;
use Illuminate\Support\Facades\Storage;
use Intervention\Image\Facades\Image;


 $prospectos = Prospecto::join('estados', 'estados.id', '=', 'prospectos.estado_id')
        ->select('prospectos.id', 'telefono', 'estados.estado',
            DB::raw('(SELECT MAX(updated_at) FROM observacions 
                        WHERE observable_type = "App\Models\Prospecto"
						AND observable_id=prospectos.id
                        AND observable_id = prospectos.id) as ultima_observacion'))
        ->get();
use App\Models\Persona;
use App\Models\Inscripcione;
use App\Models\Matriculacion;
use App\Models\Prospecto;
use Carbon\Carbon;
use Illuminate\Support\Facades\Storage;
use Intervention\Image\Facades\Image;


 $prospectos = Prospecto::join('estados', 'estados.id', '=', 'prospectos.estado_id')
        ->select('prospectos.id', 'telefono', 'estados.estado',
            DB::raw('(SELECT MAX(updated_at) FROM observacions 
                        WHERE observable_type = "App\Models\Prospecto"
						AND observable_id=prospectos.id
                        AND observable_id = prospectos.id) as ultima_observacion'))
        ->get();
use App\Models\Persona;
use App\Models\Inscripcione;
use App\Models\Matriculacion;
use App\Models\Prospecto;
use Carbon\Carbon;
use Illuminate\Support\Facades\Storage;
use Intervention\Image\Facades\Image;


 $prospectos = Prospecto::join('estados', 'estados.id', '=', 'prospectos.estado_id')
        ->select('prospectos.id', 'telefono', 'estados.estado',
            DB::raw('(SELECT MAX(updated_at) FROM observacions 
                        WHERE observable_type = "App\\Models\\Prospecto"
						AND observable_id=prospectos.id
                        AND observable_id = prospectos.id) as ultima_observacion'))
        ->get();
use App\Models\Persona;
use App\Models\Inscripcione;
use App\Models\Matriculacion;
use App\Models\Prospecto;
use Carbon\Carbon;
use Illuminate\Support\Facades\Storage;
use Intervention\Image\Facades\Image;


 $prospectos = Prospecto::join('estados', 'estados.id', '=', 'prospectos.estado_id')
        ->select('prospectos.id', 'telefono', 'estados.estado',
            DB::raw('(SELECT MAX(updated_at) FROM observacions 
                        WHERE observable_type = "App\\Models\\Prospecto"
						AND observable_id=prospectos.id
                        AND observable_id = prospectos.id) as ultima_observacion'))
        ->get();
use App\Models\Persona;
use App\Models\Inscripcione;
use App\Models\Matriculacion;
use App\Models\Prospecto;
use Carbon\Carbon;
use Illuminate\Support\Facades\Storage;
use Intervention\Image\Facades\Image;


 $prospectos = Prospecto::join('estados', 'estados.id', '=', 'prospectos.estado_id')
        ->select('prospectos.id', 'telefono', 'estados.estado',
            DB::raw('(SELECT MAX(updated_at) FROM observacions 
                        WHERE observable_type = "App\\Models\\Prospecto"
						
                        AND observable_id = prospectos.id) as ultima_observacion'))
        ->get();
use App\Models\Persona;
use App\Models\Inscripcione;
use App\Models\Matriculacion;
use App\Models\Prospecto;
use Carbon\Carbon;
use Illuminate\Support\Facades\Storage;
use Intervention\Image\Facades\Image;


 $prospectos = Prospecto::join('estados', 'estados.id', '=', 'prospectos.estado_id')
        ->select('prospectos.id', 'telefono', 'estados.estado','updated_at',
            DB::raw('(SELECT MAX(updated_at) FROM observacions 
                        WHERE observable_type = "App\\Models\\Prospecto"
						
                        AND observable_id = prospectos.id) as ultima_observacion'))
        ->get();
use App\Models\Persona;
use App\Models\Inscripcione;
use App\Models\Matriculacion;
use App\Models\Prospecto;
use Carbon\Carbon;
use Illuminate\Support\Facades\Storage;
use Intervention\Image\Facades\Image;


 $prospectos = Prospecto::join('estados', 'estados.id', '=', 'prospectos.estado_id')
        ->select('prospectos.id', 'telefono', 'estados.estado','observacions.updated_at',
            DB::raw('(SELECT MAX(updated_at) FROM observacions 
                        WHERE observable_type = "App\\Models\\Prospecto"
						
                        AND observable_id = prospectos.id) as ultima_observacion'))
        ->get();
use App\Models\Persona;
use App\Models\Inscripcione;
use App\Models\Matriculacion;
use App\Models\Prospecto;
use Carbon\Carbon;
use Illuminate\Support\Facades\Storage;
use Intervention\Image\Facades\Image;


 $prospectos = Prospecto::join('estados', 'estados.id', '=', 'prospectos.estado_id')
        ->select('prospectos.id', 'telefono', 'estados.estado',
            DB::raw('(SELECT MAX(updated_at) FROM observacions 
                        WHERE observable_type = "App\Models\Prospecto"
						
                        AND observable_id = prospectos.id) as ultima_observacion'))
        ->get();
use App\Models\Persona;
use App\Models\Inscripcione;
use App\Models\Matriculacion;
use App\Models\Prospecto;
use Carbon\Carbon;
use Illuminate\Support\Facades\Storage;
use Intervention\Image\Facades\Image;


 $prospectos = Prospecto::join('estados', 'estados.id', '=', 'prospectos.estado_id')
        ->select('prospectos.id', 'telefono', 'estados.estado',
            DB::raw('(SELECT MAX(updated_at) FROM observacions 
                        WHERE observable_type = "App\Models\Prospecto"
						AND observable_id=prospectos.id
                        AND observable_id = prospectos.id) as ultima_observacion'))
        ->get();
use App\Models\Persona;
use App\Models\Inscripcione;
use App\Models\Matriculacion;
use App\Models\Prospecto;
use Carbon\Carbon;
use Illuminate\Support\Facades\Storage;
use Intervention\Image\Facades\Image;


 $prospectos = Prospecto::join('estados', 'estados.id', '=', 'prospectos.estado_id')
        ->select('prospectos.id', 'telefono', 'estados.estado',
            DB::raw('(SELECT MAX(updated_at) FROM observacions 
                        WHERE observable_type = "App\Models\Prospecto"
						AND observable_id=prospectos.id
                        AND observable_id = prospectos.id) as ultima_observacion'))
        ->get();
use App\Models\Persona;
use App\Models\Inscripcione;
use App\Models\Matriculacion;
use App\Models\Prospecto;
use Carbon\Carbon;
use Illuminate\Support\Facades\Storage;
use Intervention\Image\Facades\Image;


 $prospectos = Prospecto::join('estados', 'estados.id', '=', 'prospectos.estado_id')
        ->select('prospectos.id', 'telefono', 'estados.estado',
            DB::raw('(SELECT MAX(updated_at) FROM observacions 
                        WHERE observable_type = "App\\Models\\Prospecto"
						AND observable_id = prospectos.id
                        AND observable_id = prospectos.id) as ultima_observacion'))
        ->get();
use App\Models\Persona;
use App\Models\Inscripcione;
use App\Models\Matriculacion;
use App\Models\Prospecto;
use Carbon\Carbon;
use Illuminate\Support\Facades\Storage;
use Intervention\Image\Facades\Image;


 $prospectos = Prospecto::join('estados', 'estados.id', '=', 'prospectos.estado_id')
        ->select('prospectos.id', 'telefono', 'estados.estado',
            DB::raw('(SELECT MAX(updated_at) FROM observacions 
                        WHERE observable_type = "App\\Models\\Prospecto"
						AND observable_id = prospectos.id
                        AND observable_id = prospectos.id) as ultima_observacion'))
        ->get();
use App\Models\Persona;
use App\Models\Inscripcione;
use App\Models\Matriculacion;
use App\Models\Prospecto;
use Carbon\Carbon;
use Illuminate\Support\Facades\Storage;
use Intervention\Image\Facades\Image;


 $prospectos = Prospecto::join('estados', 'estados.id', '=', 'prospectos.estado_id')
        ->select('prospectos.id', 'telefono', 'estados.estado',
            DB::raw('(SELECT MAX(updated_at) FROM observacions 
                        WHERE observable_type = "App\\Models\\Prospecto"
						AND observable_id = prospectos.id
                        AND observable_id = prospectos.id) as ultima_observacion'))
        ->get();
use App\Models\Persona;
use App\Models\Inscripcione;
use App\Models\Matriculacion;
use App\Models\Prospecto;
use Carbon\Carbon;
use Illuminate\Support\Facades\Storage;
use Intervention\Image\Facades\Image;


 $prospectos = Prospecto::join('estados', 'estados.id', '=', 'prospectos.estado_id')
        ->select('prospectos.id', 'telefono', 'estados.estado',
            DB::raw('(SELECT MAX(updated_at) FROM observacions 
                        WHERE observable_type = "App\\Models\\Prospecto"
						AND observable_id = prospectos.id
                        AND observable_id = prospectos.id) as ultima_observacion'))
        ->get();
use App\Models\Persona;
use App\Models\Inscripcione;
use App\Models\Matriculacion;
use App\Models\Prospecto;
use Carbon\Carbon;
use Illuminate\Support\Facades\Storage;
use Intervention\Image\Facades\Image;


 $prospectos = Prospecto::join('estados', 'estados.id', '=', 'prospectos.estado_id')
        ->select('prospectos.id', 'telefono', 'estados.estado',
            DB::raw('(SELECT MAX(updated_at) FROM observacions 
                        WHERE observable_type = "App\\Models\\Prospecto"
						AND observable_id = prospectos.id
                        AND observable_id = prospectos.id) as ultima_observacion'))
        ->get();
use App\Models\Persona;
use App\Models\Inscripcione;
use App\Models\Matriculacion;
use App\Models\Prospecto;
use Carbon\Carbon;
use Illuminate\Support\Facades\Storage;
use Intervention\Image\Facades\Image;


 $prospectos = Prospecto::join('estados', 'estados.id', '=', 'prospectos.estado_id')
        ->select('prospectos.id', 'telefono', 'estados.estado',
            DB::raw('(SELECT MAX(updated_at) FROM observacions 
                        WHERE observable_type = "App\\Models\\Prospecto"
						AND observable_id = prospectos.id
                        AND observable_id = prospectos.id) as ultima_observacion'))
        ->get();
use App\Models\Persona;
use App\Models\Inscripcione;
use App\Models\Matriculacion;
use App\Models\Prospecto;
use Carbon\Carbon;
use Illuminate\Support\Facades\Storage;
use Intervention\Image\Facades\Image;


 $prospectos = Prospecto::join('estados', 'estados.id', '=', 'prospectos.estado_id')
        ->select('prospectos.id', 'telefono', 'estados.estado',
            DB::raw('(SELECT MAX(updated_at) FROM observacions 
                        WHERE observable_type = "App\\Models\\Prospecto"
						AND observable_id = prospectos.id
                        AND observable_id = prospectos.id) as ultima_observacion'))
        ->get();
use App\Models\Persona;
use App\Models\Inscripcione;
use App\Models\Matriculacion;
use App\Models\Prospecto;
use Carbon\Carbon;
use Illuminate\Support\Facades\Storage;
use Intervention\Image\Facades\Image;


 $prospectos = Prospecto::join('estados', 'estados.id', '=', 'prospectos.estado_id')
        ->select('prospectos.id', 'telefono', 'estados.estado',
            DB::raw('(SELECT MAX(updated_at) FROM observacions 
                        WHERE observable_type = "App\\Models\\Prospecto"
						AND observable_id = prospectos.id
                        AND observable_id = prospectos.id) as ultima_observacion'))
        ->get();
use App\Models\Persona;
use App\Models\Inscripcione;
use App\Models\Matriculacion;
use App\Models\Prospecto;
use Carbon\Carbon;
use Illuminate\Support\Facades\Storage;
use Intervention\Image\Facades\Image;


 $prospectos = Prospecto::join('estados', 'estados.id', '=', 'prospectos.estado_id')
        ->select('prospectos.id', 'telefono', 'estados.estado',
            DB::raw('(SELECT MAX(updated_at) FROM observacions 
                        WHERE observable_type = "App\\Models\\Prospecto"
						AND observable_id = prospectos.id
                        AND observable_id = prospectos.id) as ultima_observacion'))
        ->get();
use App\Models\Persona;
use App\Models\Inscripcione;
use App\Models\Matriculacion;
use App\Models\Prospecto;
use Carbon\Carbon;
use Illuminate\Support\Facades\Storage;
use Intervention\Image\Facades\Image;


 $prospectos = Prospecto::join('estados', 'estados.id', '=', 'prospectos.estado_id')
        ->select('prospectos.id', 'telefono', 'estados.estado',
            DB::raw('(SELECT MAX(updated_at) FROM observacions 
                        WHERE observable_type = "App\\Models\\Prospecto"

                        AND observable_id = prospectos.id) as ultima_observacion'))
        ->get();
use App\Models\Persona;
use App\Models\Inscripcione;
use App\Models\Matriculacion;
use App\Models\Prospecto;
use Carbon\Carbon;
use Illuminate\Support\Facades\Storage;
use Intervention\Image\Facades\Image;


 $prospectos = Prospecto::join('estados', 'estados.id', '=', 'prospectos.estado_id')
        ->select('prospectos.id', 'telefono', 'estados.estado',
            DB::raw('(SELECT MAX(updated_at) FROM observacions 
                        WHERE observable_type = "App\\Models\\Prospecto"

                        AND observable_id = prospectos.id) as ultima_observacion'))
        ->get();

$o=Prospecto::find(1)->observaciones
use App\Models\Persona;
use App\Models\Inscripcione;
use App\Models\Matriculacion;
use App\Models\Prospecto;
use Carbon\Carbon;
use Illuminate\Support\Facades\Storage;
use Intervention\Image\Facades\Image;


$prospectos = Prospecto::join('estados', 'estados.id', '=', 'prospectos.estado_id')
        ->join('observacions', function($join) {
            $join->on('observacions.observable_id', '=', 'prospectos.id')
                ->where('observacions.observable_type', '=', 'App\Models\Prospecto');
        })
        ->select('prospectos.id', 'telefono', 'estados.estado', DB::raw('MAX(observacions.updated_at) as ultima_observacion'))
        ->groupBy('prospectos.id', 'telefono', 'estados.estado')
        ->get();


use App\Models\Persona;
use App\Models\Inscripcione;
use App\Models\Matriculacion;
use App\Models\Prospecto;
use Carbon\Carbon;
use Illuminate\Support\Facades\Storage;
use Intervention\Image\Facades\Image;


$prospectos = Prospecto::join('estados', 'estados.id', '=', 'prospectos.estado_id')
        ->join('observacions', function($join) {
            $join->on('observacions.observable_id', '=', 'prospectos.id')
                ->where('observacions.observable_type', '=', 'App\Models\Prospecto');
        })
        ->select('prospectos.id', 'telefono', 'estados.estado', DB::raw('MAX(observacions.updated_at) as ultima_observacion'))
        ->groupBy('prospectos.id', 'telefono', 'estados.estado')
        ->get();


use App\Models\Persona;
use App\Models\Inscripcione;
use App\Models\Matriculacion;
use App\Models\Prospecto;
use Carbon\Carbon;
use Illuminate\Support\Facades\Storage;
use Intervention\Image\Facades\Image;


$prospectos = Prospecto::join('estados', 'estados.id', '=', 'prospectos.estado_id')
  
        ->join('observacions', function($join) {
            $join->on('observacions.observable_id', '=', 'prospectos.id')
                ->where('observacions.observable_type', '=', 'App\Models\Prospecto');
        })
  		->join('userables','userable_id','observacions.id')
  		->where('userable_type','App\Models\Observacion')
        ->select('prospectos.id', 'telefono', 'estados.estado', DB::raw('MAX(observacions.updated_at) as ultima_observacion'))
        ->groupBy('prospectos.id', 'telefono', 'estados.estado')
        ->get();


use App\Models\Persona;
use App\Models\Inscripcione;
use App\Models\Matriculacion;
use App\Models\Prospecto;
use Carbon\Carbon;
use Illuminate\Support\Facades\Storage;
use Intervention\Image\Facades\Image;


$prospectos = Prospecto::join('estados', 'estados.id', '=', 'prospectos.estado_id')
  
        ->join('observacions', function($join) {
            $join->on('observacions.observable_id', '=', 'prospectos.id')
                ->where('observacions.observable_type', '=', 'App\Models\Prospecto');
        })
  		->join('userables','userable_id','observacions.id')
  		->join('users','users.id','userables.user_id')
  		->where('userable_type','App\Models\Observacion')
        ->select('prospectos.id','', 'telefono', 'estados.estado', DB::raw('MAX(observacions.updated_at) as ultima_observacion'))
        ->groupBy('prospectos.id', 'telefono', 'estados.estado')
        ->get();


use App\Models\Persona;
use App\Models\Inscripcione;
use App\Models\Matriculacion;
use App\Models\Prospecto;
use Carbon\Carbon;
use Illuminate\Support\Facades\Storage;
use Intervention\Image\Facades\Image;


$prospectos = Prospecto::join('estados', 'estados.id', '=', 'prospectos.estado_id')
  
        ->join('observacions', function($join) {
            $join->on('observacions.observable_id', '=', 'prospectos.id')
                ->where('observacions.observable_type', '=', 'App\Models\Prospecto');
        })
  		->join('userables','userable_id','observacions.id')
  		->join('users','users.id','userables.user_id')
  		->where('userable_type','App\Models\Observacion')
        ->select('prospectos.id','name', 'telefono', 'estados.estado', DB::raw('MAX(observacions.updated_at) as ultima_observacion'))
        ->groupBy('prospectos.id','name', 'telefono', 'estados.estado')
        ->get();


